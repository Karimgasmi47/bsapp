{% extends 'base.html.twig' %}

{% block title %}Issue index{% endblock %}

{% block body %}
    {% embed 'component/skeleton/_table.html.twig' %}
        {% block title %}
            Tickets
        {% endblock %}

        {% block header %}
            {% for header in list_datas['issues']['headers'] %}
                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    {{ header }}
                </th>
            {% endfor %}
        {% endblock %}

        {% block body %}
            <a href="{{ path('issue_new') }}">Cr√©er un ticket</a>

            {% for issue in list_datas['issues']['datas'] %}
                <tr>
                    <td class="px-2 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="ml-4">
                                <div class="text-sm font-medium text-gray-900">
                                    {{ issue.id }}
                                </div>
                            </div>
                        </div>
                    </td>
                    <td class="px-2 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="ml-4">
                                <div class="text-sm font-medium text-gray-900">
                                    {{ issue.type.name }}
                                </div>
                            </div>
                        </div>
                    </td>
                    <td class="px-2 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="ml-4">
                                <div class="text-sm font-medium text-gray-900">
                                    {{ issue.title }}
                                </div>
                            </div>
                        </div>
                    </td>
                    <td class="px-2 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="ml-4">
                                <div class="text-sm font-medium text-gray-900">
                                    {{ issue.status.name }}
                                </div>
                            </div>
                        </div>
                    </td>
                    <td class="px-2 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="ml-4">
                                <div class="text-sm font-medium text-gray-900">
                                    {{ issue.priority.name }}
                                </div>
                            </div>
                        </div>
                    </td>
                    <td class="px-2 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <img src="https://www.bluesquare.io/static/images/logo.png" class="rounded-full h-7 w-auto" /> {# // TODO session #}
                            <div class="ml-4">
                                <div class="text-sm font-medium text-gray-900">
                                    {{ issue.updatedAt|date("d/m/Y") }}
                                </div>
                            </div>
                        </div>
                    </td>
                    <td class="px-2 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                            <div class="ml-4">
                                    <a href="{{ url('issue_show', { id: issue.id }) }}">
                                        <div class="w-4 mr-2 transform hover:text-purple-500 hover:scale-110">
                                            <i class="fas fa-eye"></i>
                                        </div>
                                    </a>
                                    <a href="{{ url('issue_edit', { id: issue.id }) }}">
                                        <div class="w-4 mr-2 transform hover:text-purple-500 hover:scale-110">
                                            <i class="fa fa-pencil" aria-hidden="true"></i>
                                        </div>
                                    </a>
                                    <a href="{{ url('issue_delete', { id: issue.id }) }}">
                                        <div class="w-4 mr-2 transform hover:text-purple-500 hover:scale-110">
                                            <i class="fa fa-trash" aria-hidden="true"></i>
                                        </div>
                                    </a>
                            </div>
                        </div>
                    </td>
                </tr>
            {% endfor %}
        {% endblock %}
    {% endembed %}
{% endblock %}
